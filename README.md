# README
Our project comparing metallicities and SFRs of PTF SLSN, Ic, Ic-BL and SN-GRB hosts

This repo contains the code to generate all plots and tables comparing PTF SLSN/Ic/Ic-BL host galaxies. All the files in this repo are described in this README file. 

Most of the original data (e.g. SLSN fluxes and metallicities from Perley et al. 2016) is also contained in this directory, along with scripts to convert the original tables do formats suitable for processing with pyMCZ and other code.





# Data

* ## GRB line fluxes
* ## PTF SN Ic/Ic-BL line fluxes
* ## PTF SLSN line fluxes
* ## GRB metallicities
* ## PTF SN Ic/Ic-BL metallicities
* ## PTF SLSN metallicities





# Code to generate tables and plots

* ## BPT Diagram
**Code to generate plot:** 

`BPT_071918.py`

**###Input:**

* platefitfile = `'platefitflux_072117.txt'`
Emission line fluxes of the PTF SN hosts

SNinfofile = `'Sninfo_072617.txt'`
SN subtypes

GRBfile = `'GRBflux_083017_shan_astro9.txt'`
Emission line fluxes of the SN-GRB hosts as compiled from the literature

SDSSfile = `'sdss_meas.txt'`
Line fluxes of 500 SDSS galaxies used as a comparison sample 

SDSSerr = `'sdss_err.txt'`
Uncertainties of the above SDSS galaxy line fluxes

SLSNfile = `'SLSN_i_flux.txt'`
Emission line flux + uncertainties of 18 type Ic SLSNe (Perley et al. 2016)

**###Output:**
Some SLSNe are flagged as they have upper limit measurements. If the code is run with those flagged hosts included (use the switch 'noflags' in the script), the output file is `BPT_071918.pdf`, if excluded  `BPT_071918_noflags.pdf`











* ## Redshift-Magnitude, Mass-Metallicity, Mass-SFR and 
sSFR-Metallicity plots

**###Code to generate plots:** `’OH_MB_061118.py’`

**###Input:**

inpymcz = `'platefitflux_072617.pkl'`
A dictionary that contains emission line fluxes and metallicities as measured by pyMCZ, for the PTF Ic/Ic-BL hosts. This file is generated by OHdist_083017.py (not in this directory) from the ascii files that are output by pyMCZ. For more info on this file see documentation on the PTF host paper (Modjaz+ in prep): https://github.com/nyusngroup/PTFhostspaper

infit = `'SED_all_072117.pkl'`
A dictionary that contains SED fitting results including the stellar masses and SFRs for the PTF hosts. See the documents in PTF paper documentation (Modjaz+ in prep: https://github.com/nyusngroup/PTFhostspaper) on SED fitting for how this file is created.

idfile = `'PTF_SDSS_072117.txt'`
The photometry for SED fitting is downloaded from the SDSS and the hosts are labeled by the SDSS objIDs for that purpose. Use this file to cross match the SDSS objIDs to the PTF names. Four PTF hosts are outside of the SDSS footprints and their objids are hardwired to be 1-4. If the SDSS spectrum is not available, the specobjid column is 0 in this file.

inlvl = `'sdss/lvlsz.sav'`
A file sent by Dan that contains the stellar masses and SFRs for the LVL hosts.

ingrb1 = `'GRB_083017.pkl'`
A dictionary that contains emission line fluxes and metallicities as measured by pyMCZ, for the SN-GRB hosts. This file is generated by OHdist_083017.py from the ascii files that are output by pyMCZ (see above).

ingrb2 = `'GRBMsSFR_083017.txt'`
An ascii file that records the stellar masses and SFRs of the SN-GRB hosts as compiled from the literature. See more notes inside this file for where do these numbers come from.

insdss = `'sdss/intervals.txt'`
Average trends for the SDSS galaxies. This file is generated by running the jupyter notebook, M-Z relation from the SDSS galaxies.ipynb, which locates in ~/work/SDSS/. See the note file in that directory.

insfsq = `'sdss/sfsq.txt'`
LVL and SDSS data 

inohsq = `'sdss/ohsq.txt'`
SDSS and LVL metallicities: LVL only in one scale, SDSS in 4 different scales (PP04, M08, KD02, M13).

insSFRsq = `'sdss/sSFRsq.txt'`
Average trends of the SF sequence, the M-Z relation, and the sSFR-metallicity relation, for the PTF host galaxies, respectively. These files are all generated by running the jupyter notebook, M-Z relation from the SDSS galaxies.ipynb, which locates in ~/work/SDSS/.

inslsn1 = `'apjaa3522t1_mrt.txt'` 
Table 1 from Perley et al. 2016, contains coordinates, redshift, magnitude, time of SN

inslsn2 = `'apjaa3522t2_mrt.txt'` 
Table 2 from Perley et al. 2016, contains magnitude, flux density, observation date, instrument

inslsn3 = `'apjaa3522t3_mrt.txt'` 
Table 3 from Perley et al. 2016, contains observation date, flag, setup, exposure sequence, sky position angle

inslsn4 = `'apjaa3522t4_mrt.txt'` 
Table 4 from Perley et al. 2016, contains integrated galaxy magnitude, SFR, galaxy mass, extinction

inslsn5_orig = `'apjaa3522t5_mrt.txt'`
Table 5 from Perley et al. 2016, contains integrated galaxy magnitude, SFR, galaxy mass, extinction

slsn_i_z = `'slsn_i_z.txt'`
Metallicities of SLSNe from table 6 (Perley et al 2016), contains only those of type Ic

**###Output:**

* `OH_MB_061118_all_0.pdf`: Redshift vs. Magnitude

* `OH_MB_061118_all_1.pdf`: Host galaxy mass vs. Metallicity in 4 scales (KD02comb, PP04_O3N2, M08_N2Ha, M13_O3N2)

* `OH_MB_061118_all_2.pdf`: Mass vs. SFR

* `OH_MB_061118_all_3.pdf`: sSFR vs. Metallicity in 4 scales (KD02comb, PP04_O3N2, M08_N2Ha, M13_O3N2)

* `OH_MB_061118_all_4.pdf`: Like figure `OH_MB_061118_all_3.pdf`, but with axes reversed (Metallicity vs. sSFR).






* ## 

**Code to generate plot:** 

**Input:**

**Output:**

* ## 

**Code to generate plot:** 

**Input:**

**Output:**



